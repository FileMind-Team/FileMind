# backend-api.md

## Общее описание

Backend реализован с использованием FastAPI.  
Он предоставляет REST API для загрузки файлов, автотегирования и поиска по тегам.

---

## Эндпоинты

### POST /upload

- Принимает: файл (multipart/form-data)
- Действия:
  - Сохраняет файл на диск
  - Генерирует теги (по имени и содержимому)
  - Записывает метаданные и связи в базу данных
- Возвращает:
```json
{
  "file_id": 12,
  "tags": ["отчёт", "школа", "2024"]
}
```

---

### GET /search?q=тег

- Принимает: параметр `q` — строка поиска (может быть частью тега)
- Ищет все файлы, содержащие указанный тег (или его часть)
- Возвращает:
```json
[
  {
    "file_id": 12,
    "file_name": "школьный_отчёт_2024.docx",
    "tags": ["отчёт", "школа", "2024"]
  }
]
```

---

### DELETE /file/{id}

- Удаляет файл по ID:
  - Удаляет файл с диска
  - Удаляет запись из таблицы `files`
  - Удаляет все связи из `file_tags`

---

## Будущие функции

- Авторизация и токены
- Пагинация результатов
- Поддержка поиска по нескольким тегам
